{% extends "_BlankPageTemplate.html" %}


{% import "partials/_EditorPartials.html" as editor %}


{% block head %}
    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0-alpha.2/css/bootstrap.min.css" integrity="sha384-y3tfxAZXuh4HwSYylfB+J125MxIs6mR5FOHamPBG064zB+AFeWH94NdvaCBm8qnd" crossorigin="anonymous" />
    <link href="/static/css/editor.css" rel="stylesheet" />
{% endblock head %}


{% block content %}
    <header id="header">
        <ul>
            {% block header %}{% endblock header %}
        </ul>
    </header>

    <main>
        <div id="errorAlert" class="alert alert-danger sticky animated fadeInDown" hidden>
            <button type="button" class="close" data-dismiss="alert">
                <span aria-hidden="true">&times;</span>
                <span class="sr-only">Close</span>
            </button>
            <p class="message"></p>
        </div>

        <div id="success_msg" class="alert alert-success sticky" hidden>
            <button type="button" class="close" data-dismiss="alert">
                <span aria-hidden="true">&times;</span>
                <span class="sr-only">Close</span>
            </button>
            <p class="message"></p>
        </div>

        {% block addtlContent %}{% endblock addtlContent %}
    </main>

    <div class="modal fade" id="autosaveDrafts">
        <div class="modal-dialog">
            <div class="modal-content">
                <div class="modal-body text-xs-center">
                    <button type="button" class="close" data-dismiss="modal" aria-label="Close"><span aria-hidden="true">&times;</span></button>

                    <h3>Here are the autosaved versions of your article. Click one to continue with it or to delete it.</h3>
                    
                    <ul class="list-unstyled padder-lg padder-v" id="drafts_list" style="text-align:left;"></ul>

                    <div class='text-xs-center'>
                        <button type="button" class="btn btn-default" data-dismiss="modal">Close</button> 
                        <button type="button" class="btn btn-danger" id="clearStorage">Delete These</button>
                    </div>
                </div>
            </div>
        </div>
    </div>

    {% if data.page != 'write' %}
        <div class="modal fade" id="deleteModal" tabindex="-1" role="dialog" aria-labelledby="myModalLabel" aria-hidden="true">
            <div class="modal-dialog">
                <div class="modal-content">
                    <div class="modal-body" style="text-align:center;">
                        <h4>Are you sure you want to delete this article?</h4>
                        <div>
                            {% if article.status == 'ready' %}  
                            <button type="button" class="btn btn-primary" id="yes" onclick="deletedraft('InProgress');">Yeah, do it</button>
                            {% elif article.status == 'proofed' %}
                            <button type="button" class="btn btn-primary" id="yes" onclick="deletedraft('Queue');">Yeah, do it</button>
                            {% elif article.status == 'published' %}
                            <button type="button" class="btn btn-primary" id="yes" onclick="deletedraft('Articles');">Yeah, do it</button>
                            {% endif %}
                            <button type="button" class="btn btn-default" style="background-color: #F2F2F2;" id="no" data-dismiss="modal">No, I changed my mind</button>   
                        </div>
                    </div>
                </div>
            </div>
        </div>
    {% endif %}

    {% block modals %}{% endblock modals %}
{% endblock content %}


{% block footer %}
    <script src="/static/js/third-party/froala-editor.js"></script>
{% endblock footer %}