{% extends "_BaseEditorTemplate.html" %}


{% block header %}
	<li>
        <a href="{{ url_for('dashboard.review') }}">
            <span class="icon-reply"></span>
        </a>
    </li>
	<li><span class="icon icon-trash-can2"></span></li>
    <li>
        <a href="#">Save</a>
    </li>

    {# {% if article.status == 'ready' %}
		<div class="pull-right padder">
			<div class="dropdown actions-tt" data-toggle="tooltip" data-placement="left" title="other actions">
	            <div class="dropdown-toggle btn btn-default" style="background-color: #F2F2F2;" dropdown-toggle="actions" style="cursor: pointer;">
	                <span class="icon icon-cog2"></span>
	            </div>
	            <ul class="dropdown-menu w-xs animated fadeInUp" id="actions">
	                
	                <li class="actions-tt" data-toggle="tooltip" data-placement="bottom" title="only save the changes you've made to this article"><a href="" onclick="save('ready', 'InProgress');">Save Changes</a></li>
	                
	                <li class="divider"></li>
	                
	                <li class="actions-tt" data-toggle="tooltip" data-placement="bottom" title="delete this article"><a href="" onclick="$('#deleteModal').modal('show')">Delete Article</a></li>
	                
	                <li class="divider"></li>
	                
	                <li class="actions-tt" data-toggle="tooltip" data-placement="bottom" title="save the changes you've made and have someone review the article again" onclick="save('ready', 'InProgress')"><a href="">Review Again</a></li>
	            </ul>
	        </div>
	        
	        <p id="finished" class="btn btn-primary" data-toggle="tooltip" data-placement="left" title="this article is ready to be published" onclick="$('#finishModal').modal('show')">Mark as Proofread</p>
		</div>

	{% else %} 
		<div class="pull-right padder">
	        <p class="btn btn-default" data-toggle="tooltip" data-placement="left" title="delete this article" onclick="$('#deleteModal').modal('show');" style="background-color: #F5F5F5;">Delete Article</p>
			
			{% if article.status == 'proofed' %}
			<p class="btn btn-primary" data-toggle="tooltip" data-placement="left" title="only save the changes you've made to this article" onclick="save('proofed', 'Queue');">Save Changes</p>

			{% elif article.status == 'published' %} 
			<p class="btn btn-primary" data-toggle="tooltip" data-placement="left" title="only save the changes you've made to this article" onclick="save('published', 'Articles');">Save Changes</p>
			{% endif %}
		</div>
	{% endif %} #}
{% endblock header %}


{% block addtlContent %}
	<div id="startMSG" style="z-index:1000;" class="alert alert-info sticky animated fadeInDown" hidden>
	    <button type="button" class="close" data-dismiss="alert">
	        <span aria-hidden="true">&times;</span>
	        <span class="sr-only">Close</span>
	    </button>
	    <p class="message">You are now previewing the article in Inline Editing Mode. To edit a field, simply highlight the text and edit it.</p>
	</div>

	<div class="article" ng-controller="editorController">
		<input type="hidden" name="headerIMGurl" ng-model="article.headerIMGurl" value="{{ article.headerIMG }}" />
		<input type="hidden" name="featureIMGurl" ng-model="article.featureIMGurl" value="{{ article.featureIMG }}" />
		<input type="hidden" name="author" ng-model="article.author" ng-value="{{ username }}" value="{{ username }}" />
		<input type="hidden" name="coAuthor" ng-model="article.coAuthor" />
		<input type="hidden" name="id" id="id" ng-model="article.id" value="{{ article['objectId'] }}" />
		<div id="text" hidden>{{ article.content }}</div>
		<div id="article_tags" hidden>{{ ','.join(article.tags) }}</div>
		<div id="article_type" hidden>{{ article.doctype }}</div>
		<div id="article_style" hidden>{{ article.docstyle }}</div>
		<div id="releaseDate" hidden>{{ article.releaseDate }}</div>
		<div id="coAuthorslist" hidden>{{ article.coAuthor }}</div>
		<div id="current_cat" hidden>{{ article.category }}</div>
		<div id="categorylist" hidden>{{ ','.join(article.category) }}</div>
		<div id="inCycle" hidden>{{ article.cycleArticle }}</div>

		<form id="post" accept-charset="UTF-8" method="POST" enctype="multipart/form-data">
			<section id="popouts_wrapper">
				
				<!-- uploaded media -->
				<div id="pop_uploads" class="popout-left" hidden>
					<header>Uploaded Media</header>

					<div class="popout_content">
						<p class="description" style="color:white;font-size: 0.8em;margin:0;">Copy the code and paste it into the document in the HTML view ( click <code><i class="fa fa-code"></i></code> in the text editor toolbar )</p>
						
					</div>

					<div id="uploads_toggle" class="slide_toggle-left" data-toggle="tooltip" data-placement="right" title="Uploaded Media"></div>
				</div>

				<!-- article settings -->
				<div id="pop_settings" class="popout">
					<header>Article Settings</header>

					<div class="popout_content">
						<p class="label">Change Category</p>
						<!-- <p class="sub-label">the main category this article falls under. Hold <code>Cmd</code> or <code>Ctrl</code> to select all major categories that apply. </p> -->
						
						<p class="sub-label">Current: <span id="current_cat">{{ ','.join(article.category) }}</span></p>
						
						<p class="btn btn-primary" id="catChange" onclick="catChange();">Change Categories</p>
						
						<div id="categoriesWrapper" hidden>
							<ul class="clear-input-small2" id="category" name="category" style="list-style-type:none;height:140px;overflow-y:scroll;">
								<li><label><input type="checkbox" value="Art">Art</label></li>
								<li><label><input type="checkbox" value="Beauty">Beauty</label></li>
								<li><label><input type="checkbox" value="Body">Body</label></li>
								<li><label><input type="checkbox" value="Career">Career</label></li>
								<!-- <li><label><input type="checkbox" value="Cycle">Cycle</label></li> -->
								<li><label><input type="checkbox" value="Entertainment">Entertainment</label></li>
								<li><label><input type="checkbox" value="Fashion">Fashion</label></li>
								<li><label><input type="checkbox" value="Food + Drink">Food + Drink</label></li>
								<li><label><input type="checkbox" value="Hair">Hair</label></li>
								<li><label><input type="checkbox" value="Inspire">Inspire</label></li>
								<li><label><input type="checkbox" value="Lifestyle">Lifestyle</label></li>
								<li><label><input type="checkbox" value="Mind">Mind</label></li>
								<li><label><input type="checkbox" value="Money">Money</label></li>
								<li><label><input type="checkbox" value="Reign">Reign</label></li>
								<li><label><input type="checkbox" value="Rise">Rise</label></li>
								<li><label><input type="checkbox" value="Spirit">Spirit</label></li>
								<li><label><input type="checkbox" value="Travel">Travel</label></li>
								<li><label><input type="checkbox" value="Wildcard">Wildcard</label></li>
							</ul>
						</div>

						<p class="label">Add/Delete Tags</p>
						<input class="clear-input-small2" id="taginput" name="taginput" placeholder="separate, tags, with, commas" style="width:55%;" type="text" value="">

						<span class="doc-icon icon-circle-plus" id="add2list"></span>
						<div id="tags_list" style="display:block;"></div>
					</div>

					<div id="settings_toggle" class="slide_toggle" data-toggle="tooltip" data-placement="left" title="click to edit article's description and tags"></div>
				</div>

				<!-- article media -->
				<div id="pop_media" class="popout">
					<header>Media Uploads</header>
					
					<div class="popout_content">
						<p class="label">Dashboard Image</p>
						
						{% if article.featureIMG %}
							
							{% if article.featureIMG == 'same' %}
								<div class="checkbox clear-input-small3">
									<label>
										<input type="checkbox" value="headerSame" id="headerSame" checked>
										Use same image from header
									</label>
								</div>

							{% elif article.featureIMG != 'same' and article.featureIMG != '' %}
								<p class="description" id="fIMG-des">You have already uploaded a dashboard image</p>
								
								<img src={{ article.featureIMG }} alt="Article Feature" id="fIMG" width="200" />
							{% endif %}

							<p class="btn btn-primary" id="changeIMG" onclick="changeIMG();">Change Image</p>

							<div id="change_image" hidden>
								<input class="clear-input-small2" id="featureIMG" name="featureIMG" type="file" accept="image/png,image/jpg,image/jpeg,image/gif">
								<p id="upload_btn2" class="btn btn-primary" hidden>Upload</p>
								<div id="progress2" hidden></div>
						        
						        <div class="response" id="success_upload2" style="text-align:center;" hidden><span style="color: #4CDBA5;" class="icon icon-check"></span></div>
						        
						        <div class="response" id="error_upload2" style="text-align:center;" hidden><span style="color: #FA626E;" class="icon icon-cross"></span></div>
							</div>
							
						{% else %}

						<p class="description" style="color:white;font-size: 0.75em;margin:0;">none selected. Please upload an image for this article.</p>

						<!-- <ul class="radio_btn clear-input-small3" id="media" placeholder="None" style="line-height: 0px !important;">
							<li>
								<input id="media-0" name="feature-media" type="radio" value="image" checked> 
								<label for="media-0">image/picture/gif</label>
							</li>
							<li class="video" data-toggle="tooltip" data-placement="top" title="video support coming soon!">
								<input id="media-2" name="feature-media" type="radio" value="video" disabled> 
								<label for="media-2">video</label>
							</li>
						</ul>  -->

						<input class="clear-input-small2" id="featureIMG" name="featureIMG" type="file" accept="image/png,image/jpg,image/jpeg,image/gif">
						
						<p id="upload_btn2" class="btn btn-primary" hidden>Upload</p>
						
						<div id="progress2" hidden></div>

				        <div class="response" id="success_upload2" style="text-align:center;" hidden><span style="color: #4CDBA5;" class="icon icon-check"></span></div>
				        
				        <div class="response" id="error_upload2" style="text-align:center;" hidden><span style="color: #FA626E;" class="icon icon-cross"></span></div>

				        {% endif %}

						<p class="label">Upload all other media</p>
						
						<p class="description" style="color:white;font-size: 0.75em;margin:0;">(upload files one at a time)</p>
						
						<!-- <ul class="radio_btn clear-input-small3" id="media" placeholder="None" style="line-height: 0px !important;">
							<li>
								<input id="media-0" name="media" type="radio" value="image" checked> 
								<label for="media-0">image/picture/gif</label>
							</li>
							<li class="video" data-toggle="tooltip" data-placement="top" title="video support coming soon!">
								<input id="media-2" name="media" type="radio" value="video" disabled> 
								<label for="media-2">video</label>
							</li>
						</ul> -->

						<input class="clear-input-small2" id="allmedia" name="allmedia" type="file" accept="image/png,image/jpg,image/jpeg,image/gif">
						
						<p id="upload_btn3" class="btn btn-primary"hidden >Upload</p>
						
						<div id="progress3" hidden></div>
				        
				        <div class="response" id="success_upload3" style="text-align:center;" hidden><span style="color: #4CDBA5;" class="icon icon-check"></span></div>
				        
				        <div class="response" id="error_upload3" style="text-align:center;" hidden><span style="color: #FA626E;" class="icon icon-cross"></span></div>
					</div>
					
					<div id="media_toggle" class="slide_toggle" data-toggle="tooltip" data-placement="left" title="click to upload article images"></div>
				</div>

				<!-- article release -->
				<div id="pop_review" class="popout">
					<header>Publishing</header>

					<div class="popout_content">
						
						<p class="label" for="doc-type">Change Article Type</p>
						
						<p class="sub-label">Current: {{ article.doctype }}</p>
						<ul class="radio_btn clear-input-small2" id="doctype" placeholder="None" style="line-height: 0px !important;">
							<li>
								<input id="doctype-0" name="doctype" type="radio" value="feature"> 
								<label for="doctype-0">feature</label>
							</li>
							<li>
								<input id="doctype-1" name="doctype" type="radio" value="regular"> 
								<label for="doctype-1">regular</label>
							</li>
							<!-- <li>
								<input id="doctype-2" name="doctype" type="radio" value="sponsored"> 
								<label for="doctype-2">sponsored</label>
							</li> -->
						</ul>

						<p class="label">Change Article Style</p>

						<p class="sub-label">Current: {{ article.docstyle }}</p>
						
						<ul class="radio_btn clear-input-small3" id="docstyle" placeholder="None" style="line-height: 0px !important;">
							<li>
								<input id="docstyle-0" name="docstyle" type="radio" value="informational" checked> 
								<label for="docstyle-0">informational</label>
							</li>
							<li>
								<input id="docstyle-1" name="docstyle" type="radio" value="opinion"> 
								<label for="docstyle-1">opinion</label>
							</li>
						</ul>

						<p class="label">Will this article be featured in the current cycle?</p>
						<ul class="radio_btn clear-input-small3" id="cycle" style="line-height: 0px !important;">
							<li>
								<input name="feature-cycle" type="radio" value="True"> 
								<label>yes</label>
							</li>
							<li>
								<input name="feature-cycle" type="radio" value="False" checked> 
								<label>no</label>
							</li>
						</ul>

						<p class="label" for="doc-release">Change Release Date</p>
						
						<p id="date" class="sub-label">Current: <span id="rDate"></span></p>
						
						<p class="btn btn-primary" id="changeDate" onclick="changeDate();">Change Release Date</p>
						<input class="clear-input-small2" id="release" name="release" type="date" hidden>
					</div>
					
					<div id="review_toggle" class="slide_toggle" data-toggle="tooltip" data-placement="left" title="click to edit article type and publication date"></div>
				</div>
			</section>

			<section id="preview_header" style="text-align: center;">
				<div id="article_category"></div>

				<div class='clearfix'></div>
				
				{% if article.headerIMG %}
		        <img id="header_old" src="{{ article.headerIMG }}" alt="{{ article.title }}" width="650" />
			        
		        <div class="clearfix"></div>
		        
		        <input class="form-control" id="photo_cred_orig" name="photo_cred_orig" placeholder="Photo Credit" type="text" style="width:50%; margin: 10px auto;" value="{{ article.photoCred }}">

		        <p id="change_img" class="btn btn-default m">Change Header Image</p>

		        <div id="avi" hidden>
		            <div class="alert alert-info" style="width:400px; margin:0 auto;">
					    <button type="button" class="close" data-dismiss="alert">
					        <span aria-hidden="true">&times;</span>
					        <span class="sr-only">Close</span>
					    </button>
					    
					    <p class="message">Note: If you do not upload a new header image, the original header image will be kept.</p>
					</div>

		            <p id="pic_icon">
		                <!-- <span class="icon-focus"></span> -->
		                <img id="avatar_pic" src="" alt="Article Header Image" width="650" style="margin-bottom:15px;" hidden />
		            </p>
		            
		            <input class="form-control" id="headerIMG" name="headerIMG" type="file" style="width:36%;margin: 12px auto;" accept="image/png,image/jpg,image/jpeg">
		    		
		    		<p id="upload_btn1" class="btn btn-primary" onclick="s3_upload($('#headerIMG').get(0).files[0].name, 'headerIMG')" style="display:none;">Upload Image to Server</p>
		    		
		    		<input class="form-control" id="photo_cred_new" name="photo_cred_new" placeholder="Photo Credit" type="text" style="width:50%; margin: 10px auto;">
		    		
		    		<div class="padder-v response" id="circle-progress" hidden></div>
			        
			        <div class="padder-v response" id="success_upload" hidden><span style="font-size:2.4em;color: #4CDBA5;" class="icon icon-check"></span><p><small>Image has been successfully uploaded!</small></p></div>
			        
			        <div class="padder-v response" id="error_upload" hidden><span style="font-size:2.4em;color: #FA626E;" class="icon icon-cross"></span><p><small>Image could not be uploaded. Please try again.</small></p></div>
			    </div>
		        
		        {% else %} 

				<section id="article-header-img" class="text-center">
					<p class="label2">Article Header Image</p>
					
					<p><small>** must be a large, hi-res image (at least 700px wide)</small></p>

			        <p id="pic_icon">
			        
			            <span class="icon-focus"></span>
			            <img id="avatar_pic" src="" alt="Profile Picture" width="700" style="margin-bottom:15px;" hidden />
			        </p>
			        
			        <input class="form-control" id="headerIMG" name="headerIMG" type="file" accept="image/png,image/jpg,image/jpeg">
			        
			        <input class="form-control" id="photo_cred_new" name="photo_cred" placeholder="Photo Credit" type="text" style="display:none; width:50%; margin-top:7px;">
			        
			        <p id="upload_btn1" class="btn btn-primary" onclick="s3_upload($('#headerIMG').get(0).files[0].name, 'headerIMG')" style="display:none;">Upload Image</p>
			        
			        <div class="padder-v response" id="circle-progress" hidden></div>
			        
			        <div class="padder-v response" id="success_upload" hidden><span style="font-size:2.4em;color: #4CDBA5;" class="icon icon-check"></span><p><small>Image has been successfully uploaded!</small></p></div>
			        
			        <div class="padder-v response" id="error_upload" hidden><span style="font-size:2.4em;color: #FA626E;" class="icon icon-cross"></span><p><small>Image could not be uploaded. Please try again.</small></p></div>
				</section>
		        {% endif %}
		    </section>

			<section id="article-data" class="clearfix">
				<input class="clear-input-large" id="title" name="title" placeholder="Enter Title Here" type="text" value="{{ article.title }}">

				<textarea class="clear-input-small m-b-sm m-t-sm " name="description" placeholder="This will be displayed on the empire home page. Be brief." style="font-style: italic; height:auto;line-height:normal;">{{ article.description }}</textarea>

				<div class="pull-left" style="padding-left:0;">
					<input class="clear-input-med" id="author" name="author" placeholder="Author" type="text" value="{{ article.author }}" style="font-size: 1.1em;">
					
					{% if article.coAuthor %}
					<input class="clear-input-med" type="text" value="{{ article.coAuthor }}" style="font-size: 1.1em;">
					<p id="add-author" class="description" style="color:indianred; cursor:pointer;">Add/Change Co-Authors</p>

					{% else %}

					<p id="add-author" class="description" style="color:indianred; cursor:pointer;"><span class="icon icon-circle-plus padder"></span> Add another author</p>

					{% endif %}

					<div id="more-authors" hidden>
						<div class="checkbox">
							<label>
								<input type="checkbox" value="Amanda">Amanda
							</label>
						</div>
						<div class="checkbox">
							<label>
								<input type="checkbox" value="ceymasterflex">ceymasterflex
							</label>
						</div>
						<div class="checkbox">
							<label>
								<input type="checkbox" value="empressomeko1">empressomeko1
							</label>
						</div>
						<div class="checkbox">
							<label>
								<input type="checkbox" value="jazzj409">jazzj409
							</label>
						</div>
						<div class="checkbox">
							<label>
								<input type="checkbox" value="LaFemmeCompatissante">LaFemmeCompatissante
							</label>
						</div>
						<div class="checkbox">
							<label>
								<input type="checkbox" value="mariagaddis">mariagaddis
							</label>
						</div>
						<div class="checkbox">
							<label>
								<input type="checkbox" value="naakienartey">naakienartey
							</label>
						</div>
						<div class="checkbox">
							<label>
								<input type="checkbox" value="rona.abara">rona.abara
							</label>
						</div>
						<div class="checkbox">
							<label>
								<input type="checkbox" value="shantaviae">shantaviae
							</label>
						</div>
					</div>
				</div>


				<div class="pull-right">
					<div id="displayDate"></div>
				</div>
			</section>

			<div id="editor"></div>
		</form>
	</div>
{% endblock addtlContent %}


{% block modals %}
	<div class="modal fade" id="finishModal" tabindex="-1" role="dialog" aria-labelledby="myModalLabel" aria-hidden="true">
	    <div class="modal-dialog">
	        <div class="modal-content">
	            <div class="modal-body" style="text-align:center;text-align: left;font-style: normal;font-weight: 300;">
	                <h2 class="thin text-center padder-v">Please ensure that the following details are correct before marking this article as proofread.</h2>
	                <div id="finish_details">
	                	<ul style="list-style-type:none;">
	                		<li><strong>Title: </strong><span class="small" id="fTitle"></span></li>
	                		<li><strong>Author: </strong><span class="small" id="fAuthor"></span></li>
	                		<li><strong>Co-Author: </strong><span class="small" id="fCo"></span></li>
	                		<li><strong>Article Type: </strong><span class="small" id="fType"></span></li>
	                		<li><strong>Article Style: </strong><span class="small" id="fStyle"></span></li>
	                		<li><strong>Cycle Article? </strong><span class="small" id="fCycle"></span></li>
	                		<li><strong>Description: </strong><span class="small" id="fDescription"></span></li>
	                		<li><strong>Category: </strong><span class="small" id="fCategory"></span></li>
	                		<li><strong>Release Date: </strong><span class="small" id="fRelease"></span></li>
	                		<li hidden id="dateForRelease"></li>
	                		<li><strong>Tags: </strong><span class="small" id="fTags"></span></li>
	                		<li><strong>Written Content: </strong><span class="small" id="fContent"></span></li>
	                		<li><strong>Header Image: </strong><span class="small" id="fHeader"></span></li>
	                		<li><strong>Photo Cred: </strong><span class="small" id="fPhotoCred"></span></li>
	                		<li><strong>Feature Image: </strong><span class="small" id="fFeature"></span></li>
	                	</ul>
	                </div>
	                <div class='text-center'>
	                    <button type="button" class="btn btn-primary" id="proofBTN" onclick="proofed();">Yes, Mark as Proofread</button>
	                    <button type="button" class="btn btn-default" style="background-color: #F2F2F2;" data-dismiss="modal">Continue Editing</button>   
	                </div>
	            </div>
	        </div>
	    </div>
	</div>
{% endblock modals %}